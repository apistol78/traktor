<?xml version="1.0" encoding="utf-8"?>
<object type="traktor.render.ShaderGraph" version="traktor.render.Graph:1">
	<nodes>
		<item type="traktor.render.Script" version="8,traktor.render.Node:1">
			<id>{64E8B34A-7602-9943-9B0A-242FBFD2C6B4}</id>
			<comment/>
			<position>
				<first>273</first>
				<second>482</second>
			</position>
			<name>Output</name>
			<technique>Default</technique>
			<domain>Compute</domain>
			<localSize>
				<X>8</X>
				<Y>8</Y>
				<Z>1</Z>
			</localSize>
			<useRayTracing>false</useRayTracing>
			<include/>
			<inputPins>
				<item>
					<id>{D69B3EDE-00AB-2540-B217-394E11A1B0E1}</id>
					<name>Input</name>
				</item>
				<item>
					<id>{2D2D3531-DD81-1F47-90F9-DDE0C69AEF69}</id>
					<name>Output</name>
				</item>
				<item>
					<id>{98C61F79-5BF1-9D49-92B7-77AEEA0EDFAF}</id>
					<name>WorkSize</name>
				</item>
			</inputPins>
			<outputPins/>
			<script><![CDATA[// Use minimum operator when down sampling depth.

const float BiasZ = 0.1f;

const ivec2 osz = imageSize($Output);
const ivec2 isz = imageSize($Input);
const ivec2 pt = ivec2(gl_GlobalInvocationID.xy);

if (pt.x < osz.x && pt.y < osz.y)
{
	const ivec2 o = ivec2(1, 0);
	const ivec2 p = pt * 2;

	const vec4 z1 = imageLoad($Input, clamp(p + o.yy, ivec2(0.0f), isz - 1));
	const vec4 z2 = imageLoad($Input, clamp(p + o.xy, ivec2(0.0f), isz - 1));
	const vec4 z3 = imageLoad($Input, clamp(p + o.yx, ivec2(0.0f), isz - 1));
	const vec4 z4 = imageLoad($Input, clamp(p + o.xx, ivec2(0.0f), isz - 1));

	const float mnz = min(min(z1.x, z2.x), min(z3.x, z4.x)) - BiasZ;
	const vec3 avgn = normalize(z1.yzw + z2.yzw + z3.yzw + z4.yzw);

	imageStore($Output, pt, vec4(mnz, avgn));
}
	]]></script>
		</item>
		<item type="traktor.render.Parameter" version="traktor.render.Node:1">
			<id>{00000000-0000-0000-0000-000000000000}</id>
			<comment/>
			<position>
				<first>-51</first>
				<second>486</second>
			</position>
			<parameterDeclaration>{8848FFE9-3378-DB49-AE8C-CE7CA7C22FCF}</parameterDeclaration>
		</item>
		<item type="traktor.render.Parameter" version="traktor.render.Node:1">
			<id>{00000000-0000-0000-0000-000000000000}</id>
			<comment/>
			<position>
				<first>-67</first>
				<second>535</second>
			</position>
			<parameterDeclaration>{B75CF1E1-CFBD-CF48-80D8-8F9522F5AF3E}</parameterDeclaration>
		</item>
		<item type="traktor.render.Parameter" version="traktor.render.Node:1">
			<id>{00000000-0000-0000-0000-000000000000}</id>
			<comment/>
			<position>
				<first>-67</first>
				<second>592</second>
			</position>
			<parameterDeclaration>{24BCE2C1-0962-1446-9CEA-CD60C301548C}</parameterDeclaration>
		</item>
	</nodes>
	<edges>
		<item type="traktor.render.Edge" version="1">
			<source>
				<node ref="/object/nodes/item[1]"/>
				<id>{D101AE9F-E124-4371-8603-15D187427DDA}</id>
			</source>
			<destination>
				<node ref="/object/nodes/item"/>
				<id>{D69B3EDE-00AB-2540-B217-394E11A1B0E1}</id>
			</destination>
		</item>
		<item type="traktor.render.Edge" version="1">
			<source>
				<node ref="/object/nodes/item[2]"/>
				<id>{D101AE9F-E124-4371-8603-15D187427DDA}</id>
			</source>
			<destination>
				<node ref="/object/nodes/item"/>
				<id>{2D2D3531-DD81-1F47-90F9-DDE0C69AEF69}</id>
			</destination>
		</item>
		<item type="traktor.render.Edge" version="1">
			<source>
				<node ref="/object/nodes/item[3]"/>
				<id>{D101AE9F-E124-4371-8603-15D187427DDA}</id>
			</source>
			<destination>
				<node ref="/object/nodes/item"/>
				<id>{98C61F79-5BF1-9D49-92B7-77AEEA0EDFAF}</id>
			</destination>
		</item>
	</edges>
	<groups/>
</object>
